import{a as s}from"./chunk-J75XIES7.js";import{D as l,M as d,ea as h,f as i,fa as g,ga as v,ha as C,i as f,ja as I,ka as A,ma as x,o as u,r as p}from"./chunk-ZVCE5SI3.js";var c=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=l({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,e){n&1&&d(0,"router-outlet")},dependencies:[I],encapsulation:2})};var R=[{path:"",pathMatch:"full",redirectTo:"tasks"},{path:"tasks",loadChildren:()=>import("./chunk-Z5PHKVFV.js").then(t=>t.TASKS_ROUTES)},{path:"**",redirectTo:"tasks"}];var k=(t,r)=>{let e=p(s).getAccessToken();if(!e)return r(t);let m=t.clone({setHeaders:{Authorization:`Bearer ${e}`}});return r(m)};var a=class t{error(r){console.error("[Toast error]",r)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};var y=(t,r)=>{let n=p(s),e=p(a),m=p(A);return r(t).pipe(f(o=>{if(o instanceof g){if(o.status===0)return e.error("No connection."),i(()=>o);if(o.status===401)return n.logout(),e.error("Session expired. Please log in again."),m.navigateByUrl("/login"),i(()=>o);if(o.status===403)return e.error("You do not have permission to perform this action."),i(()=>o);e.error(o.error?.message??`Error (${o.status}).`)}else e.error("Unexpected error.");return i(()=>o)}))};var H={providers:[x(R),v(C([k,y]))]};h(c,H).catch(t=>console.error(t));
